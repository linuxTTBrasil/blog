<!doctype html>
<html lang="en-us">

  <head>

  <link href="http://gmpg.org/xfn/11" rel="profile">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  <script async defer crossorigin="anonymous" src="https://connect.facebook.net/pt_BR/sdk.js#xfbml=1&version=v14.0" nonce="VeSERG9M"></script>  
  <script src="https://platform.linkedin.com/in.js" type="text/javascript">lang: en_US</script>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
  
  
  <title>
    
      NSSM - Parte 1 - Instalação e primeiro serviço &middot; Linux TTB
    
  </title>

  <link rel="stylesheet" href="https://linuxttbrasil.github.io/blog/assets/css/poole.css">
  <link rel="stylesheet" href="https://linuxttbrasil.github.io/blog/assets/css/gist.css">
  <link rel="stylesheet" href="https://linuxttbrasil.github.io/blog/assets/css/syntax.css">
  <link rel="stylesheet" href="https://linuxttbrasil.github.io/blog/assets/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
  <link rel="apple-touch-icon" href="https://linuxttbrasil.github.io/blog/assets/images/apple-touch-icon-iphone-60x60.png">
  <link rel="apple-touch-icon" sizes="60x60" href="https://linuxttbrasil.github.io/blog/assets/images/apple-touch-icon-ipad-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="https://linuxttbrasil.github.io/blog/assets/images/apple-touch-icon-iphone-retina-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="https://linuxttbrasil.github.io/blog/assets/images/apple-touch-icon-ipad-retina-152x152.png">
  <link rel="shortcut icon" href="https://linuxttbrasil.github.io/blog/assets/favicon.ico">
  
  <link rel="alternate" type="application/rss+xml" title="RSS" href="https://linuxttbrasil.github.io/blog/atom.xml">
  <script src="https://linuxttbrasil.github.io/blog/assets/js/lib.js"></script>

</head>


  <body>

    <script>
  function searchHandler(e){
    var search = document.getElementById("search-input").value;
    var url = "https://linuxttbrasil.github.io" + "/search?query=" + search;
    console.info(url,"url")
    window.location.href = url;
  }
</script>
<div class="sidebar">
  <div class="sidebar-sticky">
    <div class="search">
      <input type="text" class="form-control" id="search-input" placeholder="Nome do post">
      <button onclick="searchHandler()" type="button" id="search-button" class="btn btn-light">buscar</button>
    </div>
    <div class="sidebar-about">
        <a href="https://linuxttbrasil.github.io/blog/">
          <img src="/assets/images/LTT.png"/>
        </a>

        <span class="sidebar-slogan">Unlocking DevOps Wisdom, One Tip at a Time</span>
    </div>


    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="https://linuxttbrasil.github.io/blog/">Home</a>

      

      
      
        
          
            <a class="sidebar-nav-item" href="https://linuxttbrasil.github.io/blog/about.html">Sobre</a>
          
        
      
        
      
        
          
            <a class="sidebar-nav-item" href="https://linuxttbrasil.github.io/blog/categoria-list.html">Categorias</a>
          
        
      
        
          
        
      
        
      
        
          
        
      
        
      
        
      
        
      
      <!--     
      <a class="sidebar-nav-item" onclick="this.href='data:text/html;charset=UTF-8,'+encodeURIComponent(document.getElementsByClassName('post')[0].outerHTML)" download="page.html" href="#">Download</a>
      -->
      <a class="sidebar-nav-item" href="https://github.com/JsThiago">GitHub</a>
    </nav>
    <div class="night-mode-div">
    <div>
        <img id="night-mode" src="/assets/images/moon.svg"></img>
    </div>
        <b class="copyright">&copy; 2023. All rights reserved.</b>
    </div>
    <div class="version">
            1.0.0
    </div>
    
    <script>
      function addNightModeUnderDevelopmentMessage(){
          
            let divUnderDevelopmentMessage = document.createElement("div")
            divUnderDevelopmentMessage.id = "under-development-message"
            divUnderDevelopmentMessage.innerHTML = "Dark mode under development"
            divUnderDevelopmentMessage.style.position = "fixed"
            divUnderDevelopmentMessage.style.top = "0"
            divUnderDevelopmentMessage.style.right = "0"
            divUnderDevelopmentMessage.style.color = "white"
            divUnderDevelopmentMessage.style.padding = "10px"
            divUnderDevelopmentMessage.style.backgroundColor = "#32325b"
            divUnderDevelopmentMessage.style.borderRadius = "0 0 10px 10px"
            divUnderDevelopmentMessage.style.opacity = "0.6"
            document.body.appendChild(divUnderDevelopmentMessage)
      }
      function chooseThemeOnClick(){
        let nightMode = document.getElementById("night-mode");
        var theme = localStorage.getItem('theme');
      
        if(theme === null){
          theme = 'night';
          localStorage.setItem("theme","night");
        }
        var body = document.getElementsByTagName("body")[0];
        var h1 = document.getElementsByTagName("h1")[0];
        if (theme === "light") {
            document.documentElement.style.setProperty("--title","rgba(255,255,255,0.9");
            document.documentElement.style.setProperty("--content","rgba(255,255,255,0.75");
            body.style.backgroundColor = "#202020"
            nightMode.src = "/assets/images/sun.svg";
            localStorage.setItem('theme', 'night');
            addNightModeUnderDevelopmentMessage()

          } else {
            document.getElementById("under-development-message")?.remove()
            document.documentElement.style.setProperty("--title","#303030")
            document.documentElement.style.setProperty("--content","#404040");
            body.style.backgroundColor = "aliceblue"
            localStorage.setItem("theme", 'light');
            nightMode.src = "/assets/images/moon.svg";
          }
      }
      function chooseTheme(){
        var body = document.getElementsByTagName("body")[0];
        var h1 = document.getElementsByTagName("h1")[0];
        let nightMode = document.getElementById("night-mode");
        var theme = localStorage.getItem('theme');
      
        if(theme === null){
          theme = 'night';
          localStorage.setItem("theme","night");
        }
        if (theme === "night") {
            document.documentElement.style.setProperty("--title","rgba(255,255,255,0.9");
            document.documentElement.style.setProperty("--content","rgba(255,255,255,0.75");
            body.style.backgroundColor = "#202020"
            nightMode.src = "/assets/images/sun.svg";
            localStorage.setItem('theme', 'night');
            addNightModeUnderDevelopmentMessage()
          } else {
            document.documentElement.style.setProperty("--title","#303030")
            document.documentElement.style.setProperty("--content","#404040");
            body.style.backgroundColor = "aliceblue"

            localStorage.setItem("theme", 'light');
            nightMode.src = "/assets/images/moon.svg";
          }
      }
      chooseTheme()
            

      var nightMode = document.getElementById("night-mode");
      nightMode.onclick = function() {
        chooseThemeOnClick();
      }
    </script>
  </div>
</div>


    <div class="content container">

        
      <div class="post">
  <h1 class="post-title">NSSM - Parte 1 - Instalação e primeiro serviço</h1>
  <span class="post-date">02 Sep 2023</span>
  <div class="post-categories">
  
  </div>
  <h2 id="introdução">Introdução</h2>

<p>Ao utilizar servidores, inevitavelmente você irá ter que lidar com serviços. Serviços são uma forma de executar um <strong><em>script</em></strong> ou aplicação em segundo plano (<strong><em>background</em></strong>). No universo de servidores Linux o <strong><em>systemd</em></strong> [1] é comumente usado para esse propósito. No Windows Server, as coisas são um pouco mais complicadas. O sistema Windows traz consigo uma aplicação chamada <strong><em>sc.exe</em></strong> ou <strong><em>sc</em></strong>.</p>

<blockquote>
  <p>O SDK do Windows contém uma ferramenta de linha de comando, Sc.exe, que pode ser utilizada para controlar um serviço. Seus comandos correspondem à funções providas pelo SCM.</p>

  <p>– <cite>Microsoft documentation</cite> [2]</p>
</blockquote>

<p>O <strong><em>sc</em></strong> permite criar serviços a partir de arquivos <strong><em>.exe</em></strong> integrando-se bem ao sistema. As vantagens de utilizar o <strong><em>sc</em></strong> incluem sua natureza nativa, forte integração com o sistema e uma boa documentação. Entretanto, existe uma limitação: o arquivo precisa ser <strong><em>.exe</em></strong> para ser executado pelo serviço. Para contornar essa limitação, teríamos que criar um <strong><em>wrapper</em></strong> ou encapsulador utilizando <strong><em>C#</em></strong>, por exemplo. Este encapsulador, que deve ser registrado como serviço, é um arquivo <strong><em>.exe</em></strong> que executa o <strong><em>script</em></strong> desejado. Esse formato de criação de serviços pode não ser muito prático, principalmente para usuários mais acostumados com Linux.</p>

<p>Em contrapartida, graças ao <strong><em>systemd</em></strong>, executar um script como serviço em um ambiente Linux é mais simples para usuários com experiência no sistema. Para facilitar a vida de alguns sysadmins (como eu), existem ferramentas que permitem que a criação de serviços no Windows Server seja próxima ao que existe no Linux. Uma dessas ferramentas é o <strong><em>NSSM</em></strong> (Non-Sucking Service Manager).</p>

<h2 id="instalação">Instalação</h2>

<p>A instalação pode ser realizada atravês de duas formas:</p>

<ul>
  <li>
    <p>Chocolatey</p>
  </li>
  <li>
    <p>Download Direto do Site.</p>
  </li>
</ul>

<h3 id="instalação-via-chocolatey-recomendado">Instalação via Chocolatey (Recomendado)</h3>

<p><strong><em>Chocolatey</em></strong> é um gerenciador de pacotes. Um gerenciador de pacotes é um conjunto de ferramentas que permitem a automatização da instalação de aplicações. Com um gerenciador de pacotes as aplicações são instaladas através de um terminal, como o <strong><em>powershell</em></strong> por exemplo.</p>

<p>Para instalar o <strong><em>NSSM</em></strong> através do <strong><em>Chocolatey</em></strong> é necessário instalá-lo. Isso pode ser realizado executando o comando abaixo no powershell que deve ser aberto com permissões de administrador [4].</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Set-ExecutionPolicy</span><span class="w"> </span><span class="nx">Bypass</span><span class="w"> </span><span class="nt">-Scope</span><span class="w"> </span><span class="nx">Process</span><span class="w"> </span><span class="nt">-Force</span><span class="p">;</span><span class="w"> </span><span class="p">[</span><span class="n">System.Net.ServicePointManager</span><span class="p">]::</span><span class="n">SecurityProtocol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">System.Net.ServicePointManager</span><span class="p">]::</span><span class="n">SecurityProtocol</span><span class="w"> </span><span class="o">-bor</span><span class="w"> </span><span class="nx">3072</span><span class="p">;</span><span class="w"> </span><span class="n">iex</span><span class="w"> </span><span class="p">((</span><span class="n">New-Object</span><span class="w"> </span><span class="nx">System.Net.WebClient</span><span class="p">)</span><span class="o">.</span><span class="nf">DownloadString</span><span class="p">(</span><span class="s1">'https://community.chocolatey.org/install.ps1'</span><span class="p">))</span><span class="w">
</span></code></pre></div></div>

<p>Após realizar a instalação feche o powershell, abra novamente e execute o comando para instalar o <strong><em>NSSM</em></strong>:</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">choco</span><span class="w"> </span><span class="nx">install</span><span class="w"> </span><span class="nx">nssm</span><span class="w">
</span></code></pre></div></div>

<p>Será perguntado se tem certeza que quer instalar. Digite <strong><em>y</em></strong> e pressione <strong><em>enter</em></strong>.</p>

<h3 id="instalação-via-download-direto-do-site">Instalação via Download Direto do Site</h3>

<p>Para realizar a instalação pelo download é necessário acessar o <a href="https://nssm.cc/download">site</a> do nssm. O link está presente na seção <strong><em>Latest release</em></strong>. O download será um arquivo <strong><em>.zip</em></strong>. Extraia esse arquivo utilizando qualquer aplicação de descompactação de sua preferência, como WinRAR ou 7-Zip. Navegue até a pasta <strong><em>win64</em></strong> dentro da pasta que foi descompactada. O <strong><em>nssm</em></strong> deve ser executado via terminal, portanto, copie o caminho da pasta <strong><em>win64</em></strong> do explorer, abra uma nova janela do powershell e digite o seguinte comando alterando o [caminho_copiado] para o caominho que você copiou do explorer:</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cd</span><span class="w"> </span><span class="p">[</span><span class="n">caminho_copiado</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<p>No meu caso ficou:</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cd</span><span class="w">  </span><span class="nx">C:\Users\thiagobaldino\Downloads\nssm-2.24\nssm-2.24\win64</span><span class="w">
</span></code></pre></div></div>

<p>Com isso o <strong><em>NSSM</em></strong> está, teoricamente, instalado. Porém, sempre que você quiser executa-lo, terá que navegar manualmente até a pasta descompactada. Para poder executar o comando sem precisar navegar até a pasta deve-se adiciona-la ao <a href="https://en.wikipedia.org/wiki/PATH_(variable)"><strong><em>PATH</em></strong></a> . <strong><em>PATH</em></strong> é uma variável que o sistema usa para buscar os binários de programas para executar. Ele possui diversos caminhos e, quando você executa algum comando no terminal, o sistema busca por algum binário para esse comando nos caminhos registrados no <strong><em>PATH</em></strong> [5]. Adicionar uma pasta ao <strong><em>PATH</em></strong> pode ser feito dessa maneira: <a href="https://www.architectryan.com/2018/03/17/add-to-the-path-on-windows-10/">Como adicionar uma pasta ao <strong><em>PATH</em></strong></a> [6].</p>

<h2 id="criação-de-um-novo-serviço">Criação de um novo serviço</h2>

<p>A utilização, para a criação de um novo serviço, do <strong><em>NSSM</em></strong> pode ser através de uma interface gráfica ou através de comandos no terminal. Ambas serão demonstradas mais a frente. Porém, para iniciar a interface gráfica é necessária a execução do comando no terminal.</p>

<p><img src="/assets/images/posts/2023-09-21-criando_servicos_com_nssm/nssm_gui.png" alt="nssm_gui.png" /></p>

<p><em>Interface gráfica</em></p>

<p>Pela imagem acima, pode-se observar que eu precisei executar o seguinte comando no powershell para que a interface gráfica fosse aberta.</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">nssm</span><span class="w"> </span><span class="nx">install</span><span class="w">
</span></code></pre></div></div>

<p>O <em><strong>NSSM</strong></em> permite a criação somente através dos comandos no terminal.</p>

<h3 id="preparações">Preparações</h3>

<p>Nós iremos realizar a instalação de um serviço que executa um simples servidor web excrito utilizando <strong><em>NodeJS</em></strong>. Para que o script possa executado, é necessário a instalação do NodeJS. Caso você ainda não tenha, ele pode ser instalado utilizando o chocolatey através do comando [7]:</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">choco</span><span class="w"> </span><span class="nx">install</span><span class="w"> </span><span class="nx">nodejs.install</span><span class="w">
</span></code></pre></div></div>

<p>Copie o código abaixo e salve em um arquivo com o nome de <strong><em>index.js</em></strong> [8].</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">http</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">host</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">localhost</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">port</span> <span class="o">=</span> <span class="mi">8000</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">requestListener</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">writeHead</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="dl">"</span><span class="s2">My first server!</span><span class="dl">"</span><span class="p">);</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">server</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="nx">requestListener</span><span class="p">);</span>
<span class="nx">server</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">port</span><span class="p">,</span> <span class="nx">host</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Server is running on http://</span><span class="p">${</span><span class="nx">host</span><span class="p">}</span><span class="s2">:</span><span class="p">${</span><span class="nx">port</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<h3 id="instalação-de-um-serviço-utilizando-somente-o-terminal">Instalação de um serviço utilizando somente o terminal</h3>

<p>Essa forma de criação é recomendada quando uma interface gráfica não está disponível. Um exemplo é a criação de um serviço utilizando <strong><em>SSH</em></strong> ou acesso remoto somente via terminal.</p>

<p>Para criar um serviço utilizando somente o terminal é necessário executar um comando no seguinte formato.</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">nssm</span><span class="w"> </span><span class="nx">install</span><span class="w"> </span><span class="err">&lt;</span><span class="nx">servicename</span><span class="err">&gt;</span><span class="w"> </span><span class="err">&lt;</span><span class="nx">program</span><span class="err">&gt;</span><span class="w"> </span><span class="p">[</span><span class="err">&lt;</span><span class="n">arguments</span><span class="err">&gt;</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<ul>
  <li>
    <p>servicename: É o nome que o serviço terá. Esse nome será utilizado para parar, iniciar dentre outras ações. É o identificador do serviço.</p>
  </li>
  <li>
    <p>program: É o programa que será executado. Alguns exemplos são python, node.</p>
  </li>
  <li>
    <p>arguments: Parâmetros que serão passados para o programa a ser executado. Pode-se passar o caminho de um <strong><em>script</em></strong> para um programa <strong><em>python</em></strong> por exemplo.</p>
  </li>
</ul>

<p>Para criar o serviço do servidor web simples escrito em <strong><em>NodeJS</em></strong> é necessário executar o comando trocando o valor de [caminho_para_index.js] para o caminho do seu arquivo index.js:</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">nssm</span><span class="w"> </span><span class="nx">install</span><span class="w"> </span><span class="s2">"exemplo_web_server"</span><span class="w"> </span><span class="s2">"node"</span><span class="w"> </span><span class="s2">"[caminho_para_index.js]"</span><span class="w">
</span></code></pre></div></div>

<p>No meu caso ficou:</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">nssm</span><span class="w"> </span><span class="nx">install</span><span class="w"> </span><span class="s2">"exemplo_web_server"</span><span class="w"> </span><span class="s2">"node"</span><span class="w"> </span><span class="s2">"C:\Users\thiagobaldino\Documents\index.js"</span><span class="w">
</span></code></pre></div></div>

<p>Esse comando irá criar um serviço com o nome <strong>“exemplo_web_server”</strong>. Porém, o serviço ainda não foi inicializado. Na seção de testes será demonstrado como inicializar o serviço.</p>

<h3 id="instalação-de-um-serviço-utilizando-interface-gráfica">Instalação de um serviço utilizando interface gráfica</h3>

<p>Para instalar um serviço utilizando a interface gráfica deve-se, primeiramente, abrir o powershell executar o seguinte comando.</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">nssm</span><span class="w"> </span><span class="nx">install</span><span class="w">
</span></code></pre></div></div>

<p>Uma janela como mostrada na imagem abaixo irá aparecer. Os seguinter campos devem ser preenchidos:</p>

<ul>
  <li>
    <p>Path: Caminho para a aplicação que será executada. Caso o executável esteja presente na variável <strong><em>PATH</em></strong> é possível somente escrever o nome da aplicação como <strong><em>node</em></strong>.</p>
  </li>
  <li>
    <p>Startup directory: Caminho em que o executavel irá ser executado.</p>
  </li>
  <li>
    <p>Arguments: Os argumentos que serão passados ao executar a aplicação definida no campo <em>path</em>.</p>
  </li>
  <li>
    <p>Service name: Nome de identificação do serviço que deve ser único entre todos os serviços.</p>
  </li>
</ul>

<p><img src="/assets/images/posts/2023-09-21-criando_servicos_com_nssm/install_gui.png" alt="install_gui.png" /></p>

<p>Para criar o serviço para o servidor web acima deve-se colocar o valor “<strong><em>node</em></strong>” no campo <strong><em>path</em></strong>, o valor do caminho para o arquivo index.js no campo <strong><em>arguments</em></strong>. O campo startup directory pode ser deixado em branco.</p>

<p>No meu caso, os campos ficaram com os seguintes valores:</p>

<ul>
  <li>
    <p>Path: node</p>
  </li>
  <li>
    <p>Startup directory:</p>
  </li>
  <li>
    <p>Arguments: C:\Users\thiagobaldino\Documents\index.js</p>
  </li>
  <li>
    <p>Service name: exemplo_web_server</p>
  </li>
</ul>

<blockquote>
  <p>:warning: Caso o <strong><em>NodeJS</em></strong> não esteja presente na variável <strong><em>PATH</em></strong>, você terá que indicar o caminho completo no campo “<em>Path</em>” para o binário do <strong><em>NodeJS</em></strong> ou a pasta que ele está presente no campo Startup directory.</p>
</blockquote>

<p>Em seguida, para instalar, aperte no botão “<strong>install service</strong>”. Porém, o serviço ainda não foi inicializado. Na seção de testes será demonstrado como inicializar o serviço.</p>

<h2 id="testando">Testando</h2>

<p>Para iniciar deve-se executar o seguinte comando:</p>

<div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">nssm</span><span class="w"> </span><span class="nx">start</span><span class="w"> </span><span class="s2">"exemplo_web_server"</span><span class="w">
</span></code></pre></div></div>

<p>O comando acima irá iniciar o serviço. Para conferir se o serviço está sendo executado pode-se abrir um navegador de internet e acessar o endereço <strong>http://localhost:8000</strong>.</p>

<p><img src="/assets/images/posts/2023-09-21-criando_servicos_com_nssm/api_response.png" alt="api_response.png" /></p>

<p>O serviço também estará presente nas configurações de serviços do windows que pode ser acessada buscando “<strong><em>services</em></strong>” na busca de aplicativos do sistema.</p>

<p><img src="/assets/images/posts/2023-09-21-criando_servicos_com_nssm/services.png" alt="services.png" /></p>

<h3 id="bibliografia">Bibliografia</h3>

<p>1 - <a href="https://wiki.archlinux.org/title/Systemd_(Portugu%C3%AAs)">systemd (Português) - ArchWiki</a>
2 - <a href="https://learn.microsoft.com/en-us/windows/win32/services/controlling-a-service-using-sc">sc - documentation</a></p>

<p>3 - <a href="https://nssm.cc/">nssm - site</a></p>

<p>4 - <a href="https://chocolatey.org/install#individual">Chocolatey Software - Installing Chocolatey</a></p>

<p>5 - <a href="https://en.wikipedia.org/wiki/PATH_(variable)">PATH (variable) - Wikipedia</a></p>

<p>6 - <a href="https://www.architectryan.com/2018/03/17/add-to-the-path-on-windows-10/">Como adcionar uma pasta ao PATH</a></p>

<p>7 - <a href="https://community.chocolatey.org/packages/nodejs.install">choco nodejs.install</a></p>

<p>8 - <a href="https://www.digitalocean.com/community/tutorials/how-to-create-a-web-server-in-node-js-with-the-http-module">How To Create a Web Server in Node.js with the HTTP Module - DigitalOcean</a></p>

<p>9 - <a href="https://nssm.cc/commands">NSSM - commands</a></p>

</div>
<div class="share">



      <a class="facebook-share-button"  href="https://www.facebook.com/sharer/sharer.php?u=https://linuxttbrasil.github.io/2023/09/02/NSSM-Parte1-instalac-a-o-e-primeiro-servic-o.html">
          <img class="facebook-share-button" src="https://linuxttbrasil.github.io/blog/assets/images/facebook.svg"/>
      </a>
  <a  href="https://twitter.com/share?url=https://linuxttbrasil.github.io/2023/09/02/NSSM-Parte1-instalac-a-o-e-primeiro-servic-o.html" class="twitter-share-button" data-show-count="false">
      <img class="twitter-share-button" src="https://linuxttbrasil.github.io/blog/assets/images/Twitter.svg" />
  </a>
  <a href="https://linkedin.com/shareArticle?url=linuxttbrasil.github.io/2023/09/02/NSSM-Parte1-instalac-a-o-e-primeiro-servic-o.html&title=NSSM - Parte 1 - Instalação e primeiro serviço"><img class="linkedin-share-button" src="https://linuxttbrasil.github.io/blog/assets/images/linkedin.svg"> </a>

</div>


    </div>

  </body>
</html>
